{% extends 'admin/base.html' %}

{% block admin_content %}
<div class="header">
    <h1>إدارة الأقسام</h1>
    <button class="btn" onclick="openModal('addModal')">
        <svg fill="currentColor" viewBox="0 0 20 20" width="16" height="16" style="margin-left: 8px;"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
        إضافة قسم
    </button>
</div>

<div class="card">
    <table class="table">
        <thead>
            <tr>
                <th>الاسم</th>
                <th>المعرف (Slug)</th>
                <th>عدد التطبيقات</th>
                <th>الإجراءات</th>
            </tr>
        </thead>
        <tbody>
            {% for cat in categories %}
            <tr>
                <td>{{ cat.name }}</td>
                <td>{{ cat.slug }}</td>
                <td>{{ cat.apps|length }}</td>
                <td>
                    <div class="actions">
                        <a href="{{ url_for('admin_delete_category', id=cat.id) }}" class="btn btn-danger" onclick="return confirm('هل أنت متأكد؟ سيتم حذف جميع التطبيقات المرتبطة!')">حذف</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div id="addModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>إضافة قسم جديد</h3>
            <button class="modal-close" onclick="closeModal('addModal')">&times;</button>
        </div>
        <form action="{{ url_for('admin_add_category') }}" method="POST">
            <div class="form-group">
                <label>اسم القسم</label>
                <input type="text" name="name" required placeholder="مثال: العاب">
            </div>
            <div class="form-group">
                <label>المعرف (Slug)</label>
                <input type="text" name="slug" required placeholder="مثال: games">
                <small style="color: #9b4dca; display: block; margin-top: 5px;">يستخدم في الروابط - بالإنجليزية فقط بدون مسافات</small>
            </div>
            <button type="submit" class="btn" style="width: 100%;">إضافة</button>
        </form>
    </div>
</div>
{% endblock %}
